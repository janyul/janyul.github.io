<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mr. – Page 3</title>
    
    <style>
        /* 배경 설정 */
        body {
            background-color: #000000; /* 검은색 배경 */
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100vh;
            overflow: hidden; /* 스크롤 없애기 */
            position: relative; /* 좌표 기준점 */
        }

        /* 모든 이미지 공통 설정 */
        img {
            position: absolute; /* 내 마음대로 위치 지정 */
        }

        /* --- 1. 왼쪽: 그리드 (sheet2.png) --- */
        .grid {
            width: 690px; 
            margin-left: 130px; 
            margin-top: -150px; 
            cursor: pointer;
            position: fixed;
            right: 760px; 
            bottom: 79px;
            z-index: 0;
        }

        /* --- 2. 오른쪽: 방 구성 요소들 --- */
        
        /* 전등 (light2.png) */
        .light {
            width: 300px; 
            margin-left: 130px; 
            margin-top: -150px; 
            cursor: pointer;
            position: fixed;
            right: 199px; 
            bottom: 244px;
            z-index: 1;
        }

        /* 창문 (window6.png) */
        .window {
            width: 225px; 
            margin-left: 130px; 
            margin-top: -150px; 
            cursor: pointer;
            position: fixed;
            right: 475px; 
            bottom: 393px;
            z-index: 1;
        }

        /* 스위치 (switch2.png) - 클릭 기능 추가됨 */
        .switch {
            width: 42px; 
            margin-left: 130px; 
            margin-top: -150px; 
            cursor: pointer;
            position: fixed;
            right: 249px; 
            bottom: 230px;
            z-index: 10; /* 스위치가 제일 위에 오도록 z-index를 10으로 유지 */
        }

        /* 침대 (bed2.png) */
        .bed {
            width: 210px; 
            margin-left: 130px; 
            margin-top: -150px; 
            cursor: pointer;
            position: fixed;
            right: 485px; 
            bottom: 80px;
            z-index: 1;
        }
    
        /* 사람 (character2.png) */
        .character {
            width: 119px; 
            cursor: pointer;
            user-select: none;
            display: block;
            position: fixed;
            right: 320px; 
            bottom: 65px;
            z-index: 1;
        }

        /* 요청하신 텍스트 박스 스타일 */
        #text-box {
            position: absolute;
            right: 460px;       /* 캐릭터 왼쪽 */
            bottom: 230px;
            font-size: 12px;
            line-height: 26px;
            white-space: pre-line;
            text-align: right;
            
            /* 추가 요청사항: 흰색, 굵은 폰트 */
            color: white;
            font-weight: bold;
            font-family: sans-serif; /* 깔끔한 폰트 */
            
            z-index: 20; /* 글씨가 그림 위에 뜨도록 높게 설정 */
        }
        
        /* 문장이 나타날 때 부드럽게 뜨게 하는 효과 (선택사항) */
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

    </style>
</head>
<body>

    <div id="text-box"></div>

    <script>
        // --- 1. 대사 데이터 설정 ---
        
        // (A) 처음 자동 재생 대사
        const introDialogue = [
            { text: "• THIS IS MT ROOM TOO •", sound: "animalese-4.wav" },
            { text: "• IF U DON’T WANT TO STAY HERE •", sound: "animalese-5.wav" },
            { text: "• CLICK THAT SWITCH TO LEAVE •", sound: "animalese-6.wav" },
            { text: "• BUT •", sound: "animalese-7.wav" },
            { text: "• THIS ROOM WILL BE FUN TOO •", sound: "animalese-8.wav" }
        ];

        // (B) 물건(그리드, 침대, 전등) 클릭 시 나오는 대사
        const clickDialogue = [
            { text: "• HEY •", sound: "s16.wav" },
            { text: "• I HAD A REALLY HARD TIME THESE DAYS •", sound: "s17.wav" },
            { text: "• NEXT TIME U VISIT HERE, •", sound: "s18.wav" },
            { text: "• I PROMISE I’LL OPEN THIS WINDOW TOO •", sound: "s19.wav" },
            { text: "• BUT NOT TODAY….. •", sound: "s20.wav" }
        ];

        let timer = null; // 대사 타이밍을 조절하는 변수
        const textBox = document.getElementById('text-box');

        // --- 2. 대사 재생 함수 (통합) ---
        function playSequence(dialogueList, index = 0) {
            
            // 첫 줄(index 0)일 때 화면 초기화
            if (index === 0) {
                clearTimeout(timer);    // 예약된 다음 줄 취소
                textBox.innerHTML = ''; // 화면 글씨 싹 지우기
            }

            if (index < dialogueList.length) {
                const data = dialogueList[index];

                // 텍스트 생성
                const lineDiv = document.createElement('div');
                lineDiv.textContent = data.text;
                lineDiv.classList.add('fade-in');
                textBox.appendChild(lineDiv);

                // 사운드 재생 (오류 방지 코드 포함)
                try {
                    const audio = new Audio(data.sound);
                    audio.play().catch(e => console.log("Sound play error:", e));
                } catch (e) {
                    console.log("Audio logic error");
                }

                // 다음 줄 예약 (1.5초 뒤)
                timer = setTimeout(() => {
                    playSequence(dialogueList, index + 1);
                }, 1500);
            }
        }

        // --- 3. 실행 및 이벤트 연결 ---
        window.onload = function() {
            
            // (1) 0.8초 뒤 인트로 자동 시작
            timer = setTimeout(() => {
                playSequence(introDialogue);
            }, 800);

            // (2) 클릭 이벤트 연결 (그리드, 침대, 전등)
            // HTML 요소들을 찾아서 클릭 시 clickDialogue 재생하도록 설정
            const triggers = document.querySelectorAll('.grid, .bed, .light');
            
            triggers.forEach(element => {
                element.addEventListener('click', () => {
                    playSequence(clickDialogue); // 클릭 대사 세트 시작
                });
            });
        };

    </script>

    <img src="sheet2.png" class="grid" alt="그리드">
    
    <img src="light2.png" class="light" alt="전등">
    
    <img src="window6.png" class="window" alt="창문">
    
    <a href="next.html">
        <img src="switch2.png" class="switch" alt="스위치">
    </a>
    
    <img src="bed2.png" class="bed" alt="침대">
    
    <img src="character2.png" class="character" alt="사람">

</body>
</html>